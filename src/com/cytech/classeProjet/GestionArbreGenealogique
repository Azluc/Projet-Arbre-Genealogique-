package com.cytech.classeProjet;

import java.util.*;

public class GestionArbreGenealogique {

    public static void ajouterFils(Personne parent, Personne enfant, Map<Personne, Noeud> arbre) {
        Noeud noeudParent = arbre.get(parent);
        Noeud noeudEnfant = new Noeud();
        noeudEnfant.ajouterPersonne(enfant);

        // Mise Ã  jour des liens
        noeudParent.getEnfants().add(enfant);
        noeudEnfant.getParents().add(parent);

        arbre.put(enfant, noeudEnfant);
    }


    public static void ajouterFrereOuSoeur(Personne personne, Personne frere, Map<Personne, Noeud> arbre) {
        Noeud noeudPerso = arbre.get(personne);
        Noeud noeudFrere = new Noeud();
        noeudFrere.ajouterPersonne(frere);

        for (Personne parent : noeudPerso.getParents()) {
            Noeud noeudParent = arbre.get(parent);
            noeudParent.getEnfants().add(frere);
            noeudFrere.getParents().add(parent);
        }

        arbre.put(frere, noeudFrere);
    }

    public static void ajouterFrereParent(Personne parent, Personne oncle, Map<Personne, Noeud> arbre) {
        Noeud noeudParent = arbre.get(parent);
        Noeud noeudOncle = new Noeud();
        noeudOncle.ajouterPersonne(oncle);

        for (Personne grandParent : noeudParent.getParents()) {
            Noeud noeudGP = arbre.get(grandParent);
            noeudGP.getEnfants().add(oncle);
            noeudOncle.getParents().add(grandParent);
        }

        arbre.put(oncle, noeudOncle);
    }

    public static void ajouterCousinViaOncle(Personne oncle, Personne cousin, Map<Personne, Noeud> arbre) {
        ajouterFils(oncle, cousin, arbre);
    }

    public static void ajouterCousinDirect(Personne moi, Personne cousin, Map<Personne, Noeud> arbre, List<LienParente> liens) {
        Noeud noeudCousin = new Noeud();
        noeudCousin.ajouterPersonne(cousin);
        arbre.put(cousin, noeudCousin);

        LienParente lien = new LienParente(moi, cousin, TypeRelation.COLLATERAL, 2.0);
        liens.add(lien);
    }

    public static void ajouterGrandParent(Personne petitFils, Personne grandParent, Map<Personne, Noeud> arbre) {
        Noeud noeudPetit = arbre.get(petitFils);
        Noeud noeudGP = new Noeud();
        noeudGP.ajouterPersonne(grandParent);

        for (Personne parent : noeudPetit.getParents()) {
            Noeud noeudParent = arbre.get(parent);
            noeudParent.getParents().add(grandParent);
            noeudGP.getEnfants().add(parent);
        }

        arbre.put(grandParent, noeudGP);
    }

    public static void ajouterLienParente(Personne source, Personne cible, TypeRelation type, double profondeur, List<LienParente> liens) {
        LienParente lien = new LienParente(source, cible, type, profondeur);
        liens.add(lien);
    }
}
